<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>

<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>

<html>
  <head>
    <title>Kurly Holic</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Alex+Brush" rel="stylesheet">

    <link rel="stylesheet" href="resources/assets/css/open-iconic-bootstrap.min.css">
    <link rel="stylesheet" href="resources/assets/css/animate.css">
    
    <link rel="stylesheet" href="resources/assets/css/owl.carousel.min.css">
    <link rel="stylesheet" href="resources/assets/css/owl.theme.default.min.css">
    <link rel="stylesheet" href="resources/assets/css/magnific-popup.css">

    <link rel="stylesheet" href="resources/assets/css/aos.css">

    <link rel="stylesheet" href="resources/assets/css/ionicons.min.css">

    <link rel="stylesheet" href="resources/assets/css/bootstrap-datepicker.css">
    <link rel="stylesheet" href="resources/assets/css/jquery.timepicker.css">

    
    <link rel="stylesheet" href="resources/assets/css/flaticon.css">
    <link rel="stylesheet" href="resources/assets/css/icomoon.css">
    <link rel="stylesheet" href="resources/assets/css/style.css">
    
        <script language="javascript" type="text/javascript" src="resources/js/chart/charJs/chartJs.js"></script> <!--  챠트관련  -->
		<script language="javascript" type="text/javascript" src="resources/js/chart/charJs/mspCommonCharJs.js"></script> <!--  챠트관련  -->
    	<script src="https://code.jquery.com/jquery-3.5.0.js"></script>
	    
  </head>
  
    <script>
        $(function () {
			$(".goCate").on("click", function(){
				$("#cate").val("category");
				$("#keyword").val("쌀");
				$("#searchForm").attr("action", "/category");
				$("#searchForm").submit();
			});
        });
    </script>
  
  <body>
  	<form action="#" id="searchForm" method="post">
  		<input type="hidden" name="cate" id="cate">
  		<input type="hidden" name="keyword" id="keyword">
  	</form>
    
	  <nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar">
	    <div class="container">
	      <a class="navbar-brand" href="index.html">Kurly Holic</a>
	      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav" aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
	        <span class="oi oi-menu"></span> Menu
	      </button>
	
	      <div class="collapse navbar-collapse" id="ftco-nav">
	        <ul class="navbar-nav ml-auto">
	          <li class="nav-item active"><a href="index.html" class="nav-link">Home</a></li>
	          <li class="nav-item"><a href="about.html" class="nav-link">About</a></li>
	          <li class="nav-item"><a href="tour.html" class="nav-link">Tour</a></li>
	          <li class="nav-item"><a href="hotel.html" class="nav-link">Hotels</a></li>
	          <li class="nav-item"><a href="blog.html" class="nav-link">Blog</a></li>
	          <li class="nav-item"><a href="contact.html" class="nav-link">Contact</a></li>
	          <li class="nav-item cta"><a href="contact.html" class="nav-link"><span>Add listing</span></a></li>
	        </ul>
	      </div>
	    </div>
	  </nav>
    <!-- END nav -->
    
    <div class="hero-wrap" style="background-image: url('resources/assets/images/kurly/bg_kurly.png'); height: 470px !important;">
<!--       <div class="overlay"></div> -->
<!--       <div class="container"> -->
<!--         <div class="row no-gutters slider-text js-fullheight align-items-center justify-content-start" data-scrollax-parent="true"> -->
<!--           <div class="col-md-9 ftco-animate" data-scrollax=" properties: { translateY: '70%' }"> -->
<!--             <h1 class="mb-4" data-scrollax="properties: { translateY: '30%', opacity: 1.6 }"><strong>Explore <br></strong> your amazing city</h1> -->
<!--             <p data-scrollax="properties: { translateY: '30%', opacity: 1.6 }">Find great places to stay, eat, shop, or visit from local experts</p> -->
<!--             <div class="block-17 my-4"> -->
<!--               <form action="" method="post" class="d-block d-flex"> -->
<!--                 <div class="fields d-block d-flex"> -->
<!--                   <div class="textfield-search one-third"> -->
<!--                   	<input type="text" class="form-control" placeholder="Ex: food, service, hotel"> -->
<!--                   </div> -->
<!--                   <div class="select-wrap one-third"> -->
<!--                     <div class="icon"><span class="ion-ios-arrow-down"></span></div> -->
<!--                     <select name="" id="" class="form-control" placeholder="Keyword search"> -->
<!--                       <option value="">Where</option> -->
<!--                       <option value="">San Francisco USA</option> -->
<!--                       <option value="">Berlin Germany</option> -->
<!--                       <option value="">Lodon United Kingdom</option> -->
<!--                       <option value="">Paris Italy</option> -->
<!--                     </select> -->
<!--                   </div> -->
<!--                 </div> -->
<!--                 <input type="submit" class="search-submit btn btn-primary" value="Search">   -->
<!--               </form> -->
<!--             </div> -->
<!--             <p>Or browse the highlights</p> -->
<!--             <p class="browse d-md-flex"> -->
<!--             	<span class="d-flex justify-content-md-center align-items-md-center"><a href="#"><i class="flaticon-fork"></i>Restaurant</a></span> -->
<!--             	<span class="d-flex justify-content-md-center align-items-md-center"><a href="#"><i class="flaticon-hotel"></i>Hotel</a></span>  -->
<!--             	<span class="d-flex justify-content-md-center align-items-md-center"><a href="#"><i class="flaticon-meeting-point"></i>Places</a></span>  -->
<!--             	<span class="d-flex justify-content-md-center align-items-md-	center"><a href="#"><i class="flaticon-shopping-bag"></i>Shopping</a></span> -->
<!--             </p> -->
<!--           </div> -->
<!--         </div> -->
<!--       </div> -->
    </div>

<!--     <section class="ftco-section services-section bg-light"> -->
<!--       <div class="container"> -->
<!--         <div class="row d-flex"> -->
<!--           <div class="col-md-3 d-flex align-self-stretch ftco-animate"> -->
<!--             <div class="media block-6 services d-block text-center"> -->
<!--                 <div class="chart-box"> -->
<%-- 					<div id="chart"><canvas id="DoughnutChart" width="150" height="150" style="display: block; width: 150px; height: 150px;"></canvas></div>  --%>
<!--      				<div id="legend"></div> -->
<!-- 				</div> -->
<!--             </div>       -->
<!--           </div> -->
<!--           <div class="col-md-3 d-flex align-self-stretch ftco-animate"> -->
<!--             <div class="media block-6 services d-block text-center"> -->
<!--                 <div class="chart-box"> -->
<%-- 					<div id="chart1"><canvas id="DoughnutChart1" width="150" height="150" style="display: block; width: 150px; height: 150px;"></canvas></div>  --%>
<!--      				<div id="legend1"></div> -->
<!-- 				</div> -->
<!--             </div>     -->
<!--           </div> -->
<!--           <div class="col-md-3 d-flex align-self-stretch ftco-animate"> -->
<!--             <div class="media block-6 services d-block text-center"> -->
<!--                 <div class="chart-box"> -->
<%-- 					<div id="chart2"><canvas id="DoughnutChart2" width="150" height="150" style="display: block; width: 150px; height: 150px;"></canvas></div>  --%>
<!--      				<div id="legend2"></div> -->
<!-- 				</div> -->
<!--             </div>       -->
<!--           </div> -->
<!--           <div class="col-md-3 d-flex align-self-stretch ftco-animate"> -->
<!--             <div class="media block-6 services d-block text-center"> -->
<!--                 <div class="chart-box"> -->
<%-- 					<div id="chart3"><canvas id="DoughnutChart3" width="150" height="150" style="display: block; width: 150px; height: 150px;"></canvas></div>  --%>
<!--      				<div id="legend3"></div> -->
<!-- 				</div> -->
<!--             </div>       -->
<!--           </div> -->
<!--         </div> -->
<!--       </div> -->
<!--     </section> -->
    
    <section class="ftco-section ftco-destination">
    	<div class="container">
    		<div class="row justify-content-start mb-5 pb-3">
          <div class="col-md-7 heading-section ftco-animate">
          	<span class="subheading"></span>
            <h2 class="mb-4"><strong>쌀</strong></h2>
            <span class="justify-content-md-center align-items-md-	center" style="
			    position: absolute;
			    top: 13px;
			    right: 0;
			    font-size: 20px;
			"><a href="#" class="goCate" style="font-weight: bold;">더보기</a></span>
          </div>
        </div>
    		<div class="row">
    			<div class="col-md-12">
    				<div class="destination-slider owl-carousel ftco-animate">
	    				<c:forEach var="item" items="${riceList.hits }" begin="0" end="10">
	    					<div class="item">
			    				<div class="destination">
			    					<a href="#" class="img d-flex justify-content-center align-items-center" style="background-image: url(resources/assets/images/kurly/rice1.jpg);">
			    						<div class="icon d-flex justify-content-center align-items-center">
			    							<span class="icon-search2"></span>
			    						</div>
			    					</a>
			    					<div class="text p-3">
			    						<h3><a href="#">${item._source.name }</a></h3>
			    						<span class="listing"><fmt:formatNumber type="number" maxFractionDigits="3" value="${item._source.discount_price }" /> 원</span>
			    					</div>
			    				</div>
		    				</div>
		    			</c:forEach>
    				</div>
    			</div>
    		</div>
    	</div>
    </section>
    
    <section class="ftco-section ftco-destination">
    	<div class="container">
    		<div class="row justify-content-start mb-5 pb-3">
          <div class="col-md-7 heading-section ftco-animate">
          	<span class="subheading"></span>
            <h2 class="mb-4"><strong>친환경</strong></h2>
            <span class="justify-content-md-center align-items-md-	center" style="
			    position: absolute;
			    top: 13px;
			    right: 0;
			    font-size: 20px;
			"><a href="#" class="goCate" style="font-weight: bold;">더보기</a></span>
          </div>
        </div>
    		<div class="row">
    			<div class="col-md-12">
    				<div class="destination-slider owl-carousel ftco-animate">
	    				<c:forEach var="item" items="${ecoList.hits }" begin="0" end="10">
	    					<div class="item">
			    				<div class="destination">
			    					<a href="#" class="img d-flex justify-content-center align-items-center" style="background-image: url(resources/assets/images/kurly/rice4.jpg);">
			    						<div class="icon d-flex justify-content-center align-items-center">
			    							<span class="icon-search2"></span>
			    						</div>
			    					</a>
			    					<div class="text p-3">
			    						<h3><a href="#">${item._source.name }</a></h3>
			    						<span class="listing"><fmt:formatNumber type="number" maxFractionDigits="3" value="${item._source.discount_price }" /> 원</span>
			    					</div>
			    				</div>
		    				</div>
		    			</c:forEach>
    				</div>
    			</div>
    		</div>
    	</div>
    </section>
    
    <section class="ftco-section ftco-destination">
    	<div class="container">
    		<div class="row justify-content-start mb-5 pb-3">
          <div class="col-md-7 heading-section ftco-animate">
          	<span class="subheading"></span>
            <h2 class="mb-4"><strong>40대가 선택한 상품</strong></h2>
            <span class="justify-content-md-center align-items-md-	center" style="
			    position: absolute;
			    top: 13px;
			    right: 0;
			    font-size: 20px;
			"><a href="#" class="goCate" style="font-weight: bold;">더보기</a></span>
          </div>
        </div>
    		<div class="row">
    			<div class="col-md-12">
    				<div class="destination-slider owl-carousel ftco-animate">
	    				<c:forEach var="item" items="${ecoList.hits }" begin="0" end="10">
	    					<div class="item">
			    				<div class="destination">
			    					<a href="#" class="img d-flex justify-content-center align-items-center" style="background-image: url(resources/assets/images/kurly/rice5.jpg);">
			    						<div class="icon d-flex justify-content-center align-items-center">
			    							<span class="icon-search2"></span>
			    						</div>
			    					</a>
			    					<div class="text p-3">
			    						<h3><a href="#">${item._source.name }</a></h3>
			    						<span class="listing"><fmt:formatNumber type="number" maxFractionDigits="3" value="${item._source.discount_price }" /> 원</span>
			    					</div>
			    				</div>
		    				</div>
		    			</c:forEach>
    				</div>
    			</div>
    		</div>
    	</div>
    </section>
    
    <section class="ftco-section ftco-destination">
    	<div class="container">
    		<div class="row justify-content-start mb-5 pb-3">
          <div class="col-md-7 heading-section ftco-animate">
          	<span class="subheading"></span>
            <h2 class="mb-4"><strong>상품추천 top10</strong></h2>
            <span class="justify-content-md-center align-items-md-	center" style="
			    position: absolute;
			    top: 13px;
			    right: 0;
			    font-size: 20px;
			"><a href="#" class="goCate" style="font-weight: bold;">더보기</a></span>
          </div>
        </div>
    		<div class="row">
    			<div class="col-md-12">
    				<div class="destination-slider owl-carousel ftco-animate">
	    				<c:forEach var="item" items="${ecoList.hits }" begin="0" end="10">
	    					<div class="item">
			    				<div class="destination">
			    					<a href="#" class="img d-flex justify-content-center align-items-center" style="background-image: url(resources/assets/images/kurly/rice6.jpg);">
			    						<div class="icon d-flex justify-content-center align-items-center">
			    							<span class="icon-search2"></span>
			    						</div>
			    					</a>
			    					<div class="text p-3">
			    						<h3><a href="#">${item._source.name }</a></h3>
			    						<span class="listing"><fmt:formatNumber type="number" maxFractionDigits="3" value="${item._source.discount_price }" /> 원</span>
			    					</div>
			    				</div>
		    				</div>
		    			</c:forEach>
    				</div>
    			</div>
    		</div>
    	</div>
    </section>

    <footer class="ftco-footer ftco-bg-dark ftco-section">
      <div class="container">
        <div class="row mb-5">
          <div class="col-md">
            <div class="ftco-footer-widget mb-4">
              <h2 class="ftco-heading-2">dirEngine</h2>
              <p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts.</p>
              <ul class="ftco-footer-social list-unstyled float-md-left float-lft mt-5">
                <li class="ftco-animate"><a href="#"><span class="icon-twitter"></span></a></li>
                <li class="ftco-animate"><a href="#"><span class="icon-facebook"></span></a></li>
                <li class="ftco-animate"><a href="#"><span class="icon-instagram"></span></a></li>
              </ul>
            </div>
          </div>
          <div class="col-md">
            <div class="ftco-footer-widget mb-4 ml-md-5">
              <h2 class="ftco-heading-2">Information</h2>
              <ul class="list-unstyled">
                <li><a href="#" class="py-2 d-block">About</a></li>
                <li><a href="#" class="py-2 d-block">Service</a></li>
                <li><a href="#" class="py-2 d-block">Terms and Conditions</a></li>
                <li><a href="#" class="py-2 d-block">Become a partner</a></li>
                <li><a href="#" class="py-2 d-block">Best Price Guarantee</a></li>
                <li><a href="#" class="py-2 d-block">Privacy and Policy</a></li>
              </ul>
            </div>
          </div>
          <div class="col-md">
             <div class="ftco-footer-widget mb-4">
              <h2 class="ftco-heading-2">Customer Support</h2>
              <ul class="list-unstyled">
                <li><a href="#" class="py-2 d-block">FAQ</a></li>
                <li><a href="#" class="py-2 d-block">Payment Option</a></li>
                <li><a href="#" class="py-2 d-block">Booking Tips</a></li>
                <li><a href="#" class="py-2 d-block">How it works</a></li>
                <li><a href="#" class="py-2 d-block">Contact Us</a></li>
              </ul>
            </div>
          </div>
          <div class="col-md">
            <div class="ftco-footer-widget mb-4">
            	<h2 class="ftco-heading-2">Have a Questions?</h2>
            	<div class="block-23 mb-3">
	              <ul>
	                <li><span class="icon icon-map-marker"></span><span class="text">203 Fake St. Mountain View, San Francisco, California, USA</span></li>
	                <li><a href="#"><span class="icon icon-phone"></span><span class="text">+2 392 3929 210</span></a></li>
	                <li><a href="#"><span class="icon icon-envelope"></span><span class="text">info@yourdomain.com</span></a></li>
	              </ul>
	            </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12 text-center">

            <p><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
  Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="icon-heart" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
  <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></p>
          </div>
        </div>
      </div>
    </footer>
    
  

  <!-- loader -->
  <div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px"><circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/><circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="#F96D00"/></svg></div>


  <script src="resources/assets/js/jquery.min.js"></script>
  <script src="resources/assets/js/jquery-migrate-3.0.1.min.js"></script>
  <script src="resources/assets/js/popper.min.js"></script>
  <script src="resources/assets/js/bootstrap.min.js"></script>
  <script src="resources/assets/js/jquery.easing.1.3.js"></script>
  <script src="resources/assets/js/jquery.waypoints.min.js"></script>
  <script src="resources/assets/js/jquery.stellar.min.js"></script>
  <script src="resources/assets/js/owl.carousel.min.js"></script>
  <script src="resources/assets/js/jquery.magnific-popup.min.js"></script>
  <script src="resources/assets/js/aos.js"></script>
  <script src="resources/assets/js/jquery.animateNumber.min.js"></script>
  <script src="resources/assets/js/bootstrap-datepicker.js"></script>
  <script src="resources/assets/js/jquery.timepicker.min.js"></script>
  <script src="resources/assets/js/scrollax.min.js"></script>
  <script src="resources/assets/https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false"></script>
  <script src="resources/assets/js/google-map.js"></script>
  <script src="resources/assets/js/main.js"></script>
    
  <script type="text/javascript">
        var ctx = document.getElementById("DoughnutChart").getContext('2d');
        var ctx1 = document.getElementById("DoughnutChart1").getContext('2d');
        var ctx2 = document.getElementById("DoughnutChart2").getContext('2d');
        var ctx3 = document.getElementById("DoughnutChart3").getContext('2d');

    	var chartData = [34, 66];
    	var chartLabels = ["유제품","과자류"];
    	
    	var chartData1 = [52, 48];
    	var chartLabels1 = ["생선","육고기"];

    	var chartData2 = [14, 86];
    	var chartLabels2 = ["가공식품","채소"];
    	
    	var chartData3 = [71, 29];
    	var chartLabels3 = ["건강식품","해산물"];

    	var chart = new Chart(ctx, {
    		type: 'doughnut',
    		data: {
    			labels: chartLabels,
    			datasets: [{
    				backgroundColor: ["#ea002c","#141223"],
            		borderColor: ['#ea002c','#141223'],
    			data: chartData
    			}]
    		},
    		options: {
    			cutoutPercentage: 80, 
    			legend: {
    				display: false
    			},
    			legendCallback: function(chart) {
    				var text = [];
    				text.push('<ul>');
    				var ds = chart.data.datasets[0];
    				var sum = ds.data.reduce(function add(a, b) { return a + b; }, 0);
    				for (var i=0; i<ds.data.length; i++) {
    					text.push('<li>');
    					var perc = Math.round(100*ds.data[i]/sum,0);
    					text.push('<span style="background-color:' + ds.backgroundColor[i] + '">' + '</span>' + chart.data.labels[i] + '<em>'+perc+'%</em>');
    					text.push('</li>');
    				}
    				text.push('</ul>');
    				return text.join("");
    			}
    		}
    	});
    	var chart1 = new Chart(ctx1, {
    		type: 'doughnut',
    		data: {
    			labels: chartLabels1,
    			datasets: [{
    				backgroundColor: ["#11342c","#857382"],
            		borderColor: ['#11342c','#857382'],
    			data: chartData1
    			}]
    		},
    		options: {
    			cutoutPercentage: 80, 
    			legend: {
    				display: false
    			},
    			legendCallback: function(chart) {
    				var text = [];
    				text.push('<ul>');
    				var ds = chart.data.datasets[0];
    				var sum = ds.data.reduce(function add(a, b) { return a + b; }, 0);
    				for (var i=0; i<ds.data.length; i++) {
    					text.push('<li>');
    					var perc = Math.round(100*ds.data[i]/sum,0);
    					text.push('<span style="background-color:' + ds.backgroundColor[i] + '">' + '</span>' + chart.data.labels[i] + '<em>'+perc+'%</em>');
    					text.push('</li>');
    				}
    				text.push('</ul>');
    				return text.join("");
    			}
    		}
    	});
    	var chart2 = new Chart(ctx2, {
    		type: 'doughnut',
    		data: {
    			labels: chartLabels2,
    			datasets: [{
    				backgroundColor: ["#ae12eb","#12ee12"],
            		borderColor: ['#ae12eb','#12ee12'],
    			data: chartData2
    			}]
    		},
    		options: {
    			cutoutPercentage: 80, 
    			legend: {
    				display: false
    			},
    			legendCallback: function(chart) {
    				var text = [];
    				text.push('<ul>');
    				var ds = chart.data.datasets[0];
    				var sum = ds.data.reduce(function add(a, b) { return a + b; }, 0);
    				for (var i=0; i<ds.data.length; i++) {
    					text.push('<li>');
    					var perc = Math.round(100*ds.data[i]/sum,0);
    					text.push('<span style="background-color:' + ds.backgroundColor[i] + '">' + '</span>' + chart.data.labels[i] + '<em>'+perc+'%</em>');
    					text.push('</li>');
    				}
    				text.push('</ul>');
    				return text.join("");
    			}
    		}
    	});
    	var chart3 = new Chart(ctx3, {
    		type: 'doughnut',
    		data: {
    			labels: chartLabels3,
    			datasets: [{
    				backgroundColor: ["#abcdef","#987654"],
            		borderColor: ['#abcdef','#987654'],
    			data: chartData3
    			}]
    		},
    		options: {
    			cutoutPercentage: 80, 
    			legend: {
    				display: false
    			},
    			legendCallback: function(chart) {
    				var text = [];
    				text.push('<ul>');
    				var ds = chart.data.datasets[0];
    				var sum = ds.data.reduce(function add(a, b) { return a + b; }, 0);
    				for (var i=0; i<ds.data.length; i++) {
    					text.push('<li>');
    					var perc = Math.round(100*ds.data[i]/sum,0);
    					text.push('<span style="background-color:' + ds.backgroundColor[i] + '">' + '</span>' + chart.data.labels[i] + '<em>'+perc+'%</em>');
    					text.push('</li>');
    				}
    				text.push('</ul>');
    				return text.join("");
    			}
    		}
    	});

    	var myLegendContainer = document.getElementById("legend");
    	var myLegendContainer1 = document.getElementById("legend1");
    	var myLegendContainer2 = document.getElementById("legend2");
    	var myLegendContainer3 = document.getElementById("legend3");
			// generate HTML legend
			myLegendContainer.innerHTML = chart.generateLegend();
			myLegendContainer1.innerHTML = chart1.generateLegend();
			myLegendContainer2.innerHTML = chart2.generateLegend();
			myLegendContainer3.innerHTML = chart3.generateLegend();
			// bind onClick event to all LI-tags of the legend
			var legendItems = myLegendContainer.getElementsByTagName('li');
			var legendItems = myLegendContainer1.getElementsByTagName('li');
			var legendItems = myLegendContainer2.getElementsByTagName('li');
			var legendItems = myLegendContainer3.getElementsByTagName('li');
			for (var i = 0; i < legendItems.length; i += 1) {
			legendItems[i].addEventListener("click", legendClickCallback, false);
		}

		function legendClickCallback(event) {
			event = event || window.event;

			var target = event.target || event.srcElement;
			while (target.nodeName !== 'LI') {
				target = target.parentElement;
			}
			var parent = target.parentElement;
			var chartId = parseInt(parent.classList[0].split("-")[0], 10);
			var chart = Chart.instances[chartId];
			var index = Array.prototype.slice.call(parent.children).indexOf(target);
			var meta = chart.getDatasetMeta(0);
			console.log(index);
				var item = meta.data[index];

			if (item.hidden === null || item.hidden === false) {
				item.hidden = true;
				target.classList.add('hidden');
			} else {
				target.classList.remove('hidden');
				item.hidden = null;
			}
			chart.update();
		}

    </script>
  </body>
</html>